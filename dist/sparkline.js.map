{"version":3,"sources":["webpack://sparkline/webpack/bootstrap","webpack://sparkline/./src/sparkline.js"],"names":["getY","max","height","diff","value","parseFloat","toFixed","removeChildren","svg","querySelectorAll","forEach","element","removeChild","defaultFetch","entry","buildElement","tag","attrs","document","createElementNS","name","setAttribute","sparkline","entries","options","length","map","onmousemove","onmouseout","interactive","spotRadius","spotDiameter","cursorWidth","strokeWidth","attributes","fetch","values","width","fullHeight","Math","offscreen","lastItemIndex","offset","datapoints","pathY","pathCoords","index","x","y","push","Object","assign","path","class","d","fill","fillCoords","stroke","appendChild","cursor","x1","x2","y1","y2","spot","cx","cy","r","interactionLayer","style","addEventListener","event","mouseX","offsetX","nextDataPoint","find","previousDataPoint","indexOf","currentDataPoint","halfway"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;AClFA,SAASA,IAAT,CAAcC,GAAd,EAAmBC,MAAnB,EAA2BC,IAA3B,EAAiCC,KAAjC,EAAwC;AACtC,SAAOC,UAAU,CAAC,CAACH,MAAM,GAAIE,KAAK,GAAGF,MAAR,GAAiBD,GAA3B,GAAkCE,IAAnC,EAAyCG,OAAzC,CAAiD,CAAjD,CAAD,CAAjB;AACD;;AAED,SAASC,cAAT,CAAwBC,GAAxB,EAA6B;AAC3B,qBAAIA,GAAG,CAACC,gBAAJ,CAAqB,GAArB,CAAJ,EAA+BC,OAA/B,CAAuC,UAAAC,OAAO;AAAA,WAAIH,GAAG,CAACI,WAAJ,CAAgBD,OAAhB,CAAJ;AAAA,GAA9C;AACD;;AAED,SAASE,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,SAAOA,KAAK,CAACV,KAAb;AACD;;AAED,SAASW,YAAT,CAAsBC,GAAtB,EAA2BC,KAA3B,EAAkC;AAChC,MAAMN,OAAO,GAAGO,QAAQ,CAACC,eAAT,CAAyB,4BAAzB,EAAuDH,GAAvD,CAAhB;;AAEA,OAAK,IAAII,IAAT,IAAiBH,KAAjB,EAAwB;AACtBN,WAAO,CAACU,YAAR,CAAqBD,IAArB,EAA2BH,KAAK,CAACG,IAAD,CAAhC;AACD;;AAED,SAAOT,OAAP;AACD;;AAEM,SAASW,SAAT,CAAmBd,GAAnB,EAAwBe,OAAxB,EAAiCC,OAAjC,EAA0C;AAC/CjB,gBAAc,CAACC,GAAD,CAAd;;AAEA,MAAIe,OAAO,CAACE,MAAR,IAAkB,CAAtB,EAAyB;AACvB;AACD;;AAEDD,SAAO,GAAGA,OAAO,IAAI,EAArB;;AAEA,MAAI,OAAOD,OAAO,CAAC,CAAD,CAAd,KAAuB,QAA3B,EAAqC;AACnCA,WAAO,GAAGA,OAAO,CAACG,GAAR,CAAY,UAAAZ,KAAK,EAAI;AAC7B,aAAO;AAACV,aAAK,EAAEU;AAAR,OAAP;AACD,KAFS,CAAV;AAGD,GAb8C,CAe/C;AACA;AACA;;;AACA,MAAMa,WAAW,GAAGH,OAAO,CAACG,WAA5B,CAlB+C,CAoB/C;AACA;;AACA,MAAMC,UAAU,GAAGJ,OAAO,CAACI,UAA3B,CAtB+C,CAwB/C;AACA;;AACA,MAAMC,WAAW,GAAI,iBAAiBL,OAAlB,GAA6BA,OAAO,CAACK,WAArC,GAAmD,CAAC,CAACF,WAAzE,CA1B+C,CA4B/C;;AACA,MAAMG,UAAU,GAAGN,OAAO,CAACM,UAAR,IAAsB,CAAzC;AACA,MAAMC,YAAY,GAAGD,UAAU,GAAG,CAAlC,CA9B+C,CAgC/C;;AACA,MAAME,WAAW,GAAGR,OAAO,CAACQ,WAAR,IAAuB,CAA3C,CAjC+C,CAmC/C;AACA;;AACA,MAAMC,WAAW,GAAG5B,UAAU,CAACG,GAAG,CAAC0B,UAAJ,CAAe,cAAf,EAA+B9B,KAAhC,CAA9B,CArC+C,CAuC/C;AACA;AACA;AACA;;AACA,MAAM+B,KAAK,GAAGX,OAAO,CAACW,KAAR,IAAiBtB,YAA/B,CA3C+C,CA6C/C;;AACA,MAAMuB,MAAM,GAAGb,OAAO,CAACG,GAAR,CAAY,UAAAZ,KAAK;AAAA,WAAIqB,KAAK,CAACrB,KAAD,CAAT;AAAA,GAAjB,CAAf,CA9C+C,CAgD/C;;AACA,MAAMuB,KAAK,GAAGhC,UAAU,CAACG,GAAG,CAAC0B,UAAJ,CAAeG,KAAf,CAAqBjC,KAAtB,CAAV,GAAyC2B,YAAY,GAAG,CAAtE,CAjD+C,CAmD/C;AACA;;AACA,MAAMO,UAAU,GAAGjC,UAAU,CAACG,GAAG,CAAC0B,UAAJ,CAAehC,MAAf,CAAsBE,KAAvB,CAA7B,CArD+C,CAuD/C;;AACA,MAAMF,MAAM,GAAGoC,UAAU,GAAIL,WAAW,GAAG,CAA5B,GAAiCF,YAAhD,CAxD+C,CA0D/C;AACA;;AACA,MAAM9B,GAAG,GAAGsC,IAAI,CAACtC,GAAL,OAAAsC,IAAI,qBAAQH,MAAR,EAAhB,CA5D+C,CA8D/C;AACA;;AACA,MAAMI,SAAS,GAAG,CAAC,IAAnB,CAhE+C,CAkE/C;;AACA,MAAMC,aAAa,GAAGL,MAAM,CAACX,MAAP,GAAgB,CAAtC,CAnE+C,CAqE/C;;AACA,MAAMiB,MAAM,GAAGL,KAAK,GAAGI,aAAvB,CAtE+C,CAwE/C;AACA;;AACA,MAAME,UAAU,GAAG,EAAnB,CA1E+C,CA4E/C;;AACA,MAAMC,KAAK,GAAG5C,IAAI,CAACC,GAAD,EAAMC,MAAN,EAAc+B,WAAW,GAAGH,UAA5B,EAAwCM,MAAM,CAAC,CAAD,CAA9C,CAAlB;AACA,MAAIS,UAAU,cAAOd,YAAP,cAAuBa,KAAvB,CAAd;AAEAR,QAAM,CAAC1B,OAAP,CAAe,UAACN,KAAD,EAAQ0C,KAAR,EAAkB;AAC/B,QAAMC,CAAC,GAAGD,KAAK,GAAGJ,MAAR,GAAiBX,YAA3B;AACA,QAAMiB,CAAC,GAAGhD,IAAI,CAACC,GAAD,EAAMC,MAAN,EAAc+B,WAAW,GAAGH,UAA5B,EAAwC1B,KAAxC,CAAd;AAEAuC,cAAU,CAACM,IAAX,CAAgBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB5B,OAAO,CAACuB,KAAD,CAAzB,EAAkC;AAChDA,WAAK,EAAEA,KADyC;AAEhDC,OAAC,EAAEA,CAF6C;AAGhDC,OAAC,EAAEA;AAH6C,KAAlC,CAAhB;AAMAH,cAAU,iBAAUE,CAAV,cAAeC,CAAf,CAAV;AACD,GAXD;AAaA,MAAMI,IAAI,GAAGrC,YAAY,CAAC,MAAD,EAAS;AAChCsC,SAAK,EAAE,iBADyB;AAEhCC,KAAC,EAAET,UAF6B;AAGhCU,QAAI,EAAE;AAH0B,GAAT,CAAzB;AAMA,MAAIC,UAAU,aAAMX,UAAN,gBAAsBP,UAAtB,gBAAsCP,YAAtC,cAAsDO,UAAtD,OAAd;AAEA,MAAMiB,IAAI,GAAGxC,YAAY,CAAC,MAAD,EAAS;AAChCsC,SAAK,EAAE,iBADyB;AAEhCC,KAAC,EAAEE,UAF6B;AAGhCC,UAAM,EAAE;AAHwB,GAAT,CAAzB;AAMAjD,KAAG,CAACkD,WAAJ,CAAgBH,IAAhB;AACA/C,KAAG,CAACkD,WAAJ,CAAgBN,IAAhB;;AAEA,MAAI,CAACvB,WAAL,EAAkB;AAChB;AACD;;AAED,MAAM8B,MAAM,GAAG5C,YAAY,CAAC,MAAD,EAAS;AAClCsC,SAAK,EAAE,mBAD2B;AAElCO,MAAE,EAAEpB,SAF8B;AAGlCqB,MAAE,EAAErB,SAH8B;AAIlCsB,MAAE,EAAE,CAJ8B;AAKlCC,MAAE,EAAEzB,UAL8B;AAMlC,oBAAgBN;AANkB,GAAT,CAA3B;AASA,MAAMgC,IAAI,GAAGjD,YAAY,CAAC,QAAD,EAAW;AAClCsC,SAAK,EAAE,iBAD2B;AAElCY,MAAE,EAAEzB,SAF8B;AAGlC0B,MAAE,EAAE1B,SAH8B;AAIlC2B,KAAC,EAAErC;AAJ+B,GAAX,CAAzB;AAOAtB,KAAG,CAACkD,WAAJ,CAAgBC,MAAhB;AACAnD,KAAG,CAACkD,WAAJ,CAAgBM,IAAhB;AAEA,MAAMI,gBAAgB,GAAGrD,YAAY,CAAC,MAAD,EAAS;AAC5CsB,SAAK,EAAE7B,GAAG,CAAC0B,UAAJ,CAAeG,KAAf,CAAqBjC,KADgB;AAE5CF,UAAM,EAAEM,GAAG,CAAC0B,UAAJ,CAAehC,MAAf,CAAsBE,KAFc;AAG5CiE,SAAK,EAAE,wCAHqC;AAI5ChB,SAAK,EAAE;AAJqC,GAAT,CAArC;AAMA7C,KAAG,CAACkD,WAAJ,CAAgBU,gBAAhB;AAEAA,kBAAgB,CAACE,gBAAjB,CAAkC,UAAlC,EAA8C,UAAAC,KAAK,EAAI;AACrDZ,UAAM,CAACtC,YAAP,CAAoB,IAApB,EAA0BmB,SAA1B;AACAmB,UAAM,CAACtC,YAAP,CAAoB,IAApB,EAA0BmB,SAA1B;AAEAwB,QAAI,CAAC3C,YAAL,CAAkB,IAAlB,EAAwBmB,SAAxB;;AAEA,QAAIZ,UAAJ,EAAgB;AACdA,gBAAU,CAAC2C,KAAD,CAAV;AACD;AACF,GATD;AAWAH,kBAAgB,CAACE,gBAAjB,CAAkC,WAAlC,EAA+C,UAAAC,KAAK,EAAI;AACtD,QAAMC,MAAM,GAAGD,KAAK,CAACE,OAArB;AAEA,QAAIC,aAAa,GAAG/B,UAAU,CAACgC,IAAX,CAAgB,UAAA7D,KAAK,EAAI;AAC3C,aAAOA,KAAK,CAACiC,CAAN,IAAWyB,MAAlB;AACD,KAFmB,CAApB;;AAIA,QAAI,CAACE,aAAL,EAAoB;AAClBA,mBAAa,GAAG/B,UAAU,CAACF,aAAD,CAA1B;AACD;;AAED,QAAImC,iBAAiB,GAAGjC,UAAU,CAACA,UAAU,CAACkC,OAAX,CAAmBH,aAAnB,IAAoC,CAArC,CAAlC;AACA,QAAII,gBAAJ;AACA,QAAIC,OAAJ;;AAEA,QAAIH,iBAAJ,EAAuB;AACrBG,aAAO,GAAGH,iBAAiB,CAAC7B,CAAlB,GAAuB,CAAC2B,aAAa,CAAC3B,CAAd,GAAkB6B,iBAAiB,CAAC7B,CAArC,IAA0C,CAA3E;AACA+B,sBAAgB,GAAGN,MAAM,IAAIO,OAAV,GAAoBL,aAApB,GAAoCE,iBAAvD;AACD,KAHD,MAGO;AACLE,sBAAgB,GAAGJ,aAAnB;AACD;;AAED,QAAM3B,CAAC,GAAG+B,gBAAgB,CAAC/B,CAA3B;AACA,QAAMC,CAAC,GAAG8B,gBAAgB,CAAC9B,CAA3B;AAEAgB,QAAI,CAAC3C,YAAL,CAAkB,IAAlB,EAAwB0B,CAAxB;AACAiB,QAAI,CAAC3C,YAAL,CAAkB,IAAlB,EAAwB2B,CAAxB;AAEAW,UAAM,CAACtC,YAAP,CAAoB,IAApB,EAA0B0B,CAA1B;AACAY,UAAM,CAACtC,YAAP,CAAoB,IAApB,EAA0B0B,CAA1B;;AAEA,QAAIpB,WAAJ,EAAiB;AACfA,iBAAW,CAAC4C,KAAD,EAAQO,gBAAR,CAAX;AACD;AACF,GAlCD;AAmCD;AAEc,+DAAAxD,SAAf,E","file":"sparkline.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/sparkline.js\");\n","function getY(max, height, diff, value) {\n  return parseFloat((height - (value * height / max) + diff).toFixed(2));\n}\n\nfunction removeChildren(svg) {\n  [...svg.querySelectorAll(\"*\")].forEach(element => svg.removeChild(element));\n}\n\nfunction defaultFetch(entry) {\n  return entry.value;\n}\n\nfunction buildElement(tag, attrs) {\n  const element = document.createElementNS(\"http://www.w3.org/2000/svg\", tag);\n\n  for (let name in attrs) {\n    element.setAttribute(name, attrs[name]);\n  }\n\n  return element;\n}\n\nexport function sparkline(svg, entries, options) {\n  removeChildren(svg);\n\n  if (entries.length <= 1) {\n    return;\n  }\n\n  options = options || {};\n\n  if (typeof(entries[0]) === \"number\") {\n    entries = entries.map(entry => {\n      return {value: entry};\n    });\n  }\n\n  // This function will be called whenever the mouse moves\n  // over the SVG. You can use it to render something like a\n  // tooltip.\n  const onmousemove = options.onmousemove;\n\n  // This function will be called whenever the mouse leaves\n  // the SVG area. You can use it to hide the tooltip.\n  const onmouseout = options.onmouseout;\n\n  // Should we run in interactive mode? If yes, this will handle the\n  // cursor and spot position when moving the mouse.\n  const interactive = (\"interactive\" in options) ? options.interactive : !!onmousemove;\n\n  // Define how big should be the spot area.\n  const spotRadius = options.spotRadius || 2;\n  const spotDiameter = spotRadius * 2;\n\n  // Define how wide should be the cursor area.\n  const cursorWidth = options.cursorWidth || 2;\n\n  // Get the stroke width; this is used to compute the\n  // rendering offset.\n  const strokeWidth = parseFloat(svg.attributes[\"stroke-width\"].value);\n\n  // By default, data must be formatted as an array of numbers or\n  // an array of objects with the value key (like `[{value: 1}]`).\n  // You can set a custom function to return data for a different\n  // data structure.\n  const fetch = options.fetch || defaultFetch;\n\n  // Retrieve only values, easing the find for the maximum value.\n  const values = entries.map(entry => fetch(entry));\n\n  // The rendering width will account for the spot size.\n  const width = parseFloat(svg.attributes.width.value) - spotDiameter * 2;\n\n  // Get the SVG element's full height.\n  // This is used\n  const fullHeight = parseFloat(svg.attributes.height.value);\n\n  // The rendering height accounts for stroke width and spot size.\n  const height = fullHeight - (strokeWidth * 2) - spotDiameter;\n\n  // The maximum value. This is used to calculate the Y coord of\n  // each sparkline datapoint.\n  const max = Math.max(...values);\n\n  // Some arbitrary value to remove the cursor and spot out of\n  // the viewing canvas.\n  const offscreen = -1000;\n\n  // Cache the last item index.\n  const lastItemIndex = values.length - 1;\n\n  // Calculate the X coord base step.\n  const offset = width / lastItemIndex;\n\n  // Hold all datapoints, which is whatever we got as the entry plus\n  // x/y coords and the index.\n  const datapoints = [];\n\n  // Hold the line coordinates.\n  const pathY = getY(max, height, strokeWidth + spotRadius, values[0]);\n  let pathCoords = `M${spotDiameter} ${pathY}`;\n\n  values.forEach((value, index) => {\n    const x = index * offset + spotDiameter;\n    const y = getY(max, height, strokeWidth + spotRadius, value);\n\n    datapoints.push(Object.assign({}, entries[index], {\n      index: index,\n      x: x,\n      y: y\n    }));\n\n    pathCoords += ` L ${x} ${y}`;\n  });\n\n  const path = buildElement(\"path\", {\n    class: \"sparkline--line\",\n    d: pathCoords,\n    fill: \"none\"\n  });\n\n  let fillCoords = `${pathCoords} V ${fullHeight} L ${spotDiameter} ${fullHeight} Z`;\n\n  const fill = buildElement(\"path\", {\n    class: \"sparkline--fill\",\n    d: fillCoords,\n    stroke: \"none\"\n  });\n\n  svg.appendChild(fill);\n  svg.appendChild(path);\n\n  if (!interactive) {\n    return;\n  }\n\n  const cursor = buildElement(\"line\", {\n    class: \"sparkline--cursor\",\n    x1: offscreen,\n    x2: offscreen,\n    y1: 0,\n    y2: fullHeight,\n    \"stroke-width\": cursorWidth\n  });\n\n  const spot = buildElement(\"circle\", {\n    class: \"sparkline--spot\",\n    cx: offscreen,\n    cy: offscreen,\n    r: spotRadius\n  });\n\n  svg.appendChild(cursor);\n  svg.appendChild(spot);\n\n  const interactionLayer = buildElement(\"rect\", {\n    width: svg.attributes.width.value,\n    height: svg.attributes.height.value,\n    style: \"fill: transparent; stroke: transparent\",\n    class: \"sparkline--interaction-layer\",\n  });\n  svg.appendChild(interactionLayer);\n\n  interactionLayer.addEventListener(\"mouseout\", event => {\n    cursor.setAttribute(\"x1\", offscreen);\n    cursor.setAttribute(\"x2\", offscreen);\n\n    spot.setAttribute(\"cx\", offscreen);\n\n    if (onmouseout) {\n      onmouseout(event);\n    }\n  });\n\n  interactionLayer.addEventListener(\"mousemove\", event => {\n    const mouseX = event.offsetX;\n\n    let nextDataPoint = datapoints.find(entry => {\n      return entry.x >= mouseX;\n    });\n\n    if (!nextDataPoint) {\n      nextDataPoint = datapoints[lastItemIndex];\n    }\n\n    let previousDataPoint = datapoints[datapoints.indexOf(nextDataPoint) - 1];\n    let currentDataPoint;\n    let halfway;\n\n    if (previousDataPoint) {\n      halfway = previousDataPoint.x + ((nextDataPoint.x - previousDataPoint.x) / 2);\n      currentDataPoint = mouseX >= halfway ? nextDataPoint : previousDataPoint;\n    } else {\n      currentDataPoint = nextDataPoint;\n    }\n\n    const x = currentDataPoint.x;\n    const y = currentDataPoint.y;\n\n    spot.setAttribute(\"cx\", x);\n    spot.setAttribute(\"cy\", y);\n\n    cursor.setAttribute(\"x1\", x);\n    cursor.setAttribute(\"x2\", x);\n\n    if (onmousemove) {\n      onmousemove(event, currentDataPoint);\n    }\n  });\n}\n\nexport default sparkline;\n"],"sourceRoot":""}